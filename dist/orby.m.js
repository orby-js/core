var t=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]),this.tag=t,this.props=Object.assign({},e,{children:n})};function e(e,r){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(e||"",r,function e(r,o){void 0===o&&(o=[]);for(var i=0;i<r.length;i++){var s=r[i];Array.isArray(s)?e(s,o):o.push(n(s)?s:new t("",{},[s||""]))}return o}(o))}function n(e){return"object"==typeof e&&e instanceof t}function r(t){return t.shadowRoot||t}function o(t,e,n){t.removeChild(e)}function i(t,e,n){t.appendChild(e)}t.prototype.clone=function(e,n,r){return void 0===e&&(e=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new t(e,n,r)},t.prototype.emit=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===t&&(this.prevent=!0),"function"==typeof this.props[t]&&(e=this.props)[t].apply(e,n))};var s="attachShadow",a={delay:1},p="__master__",c="__remove__",f="__listeners__",d=["children","create","created","remove","removed","update","updated","context","state","static"];function v(t,e,n,o,i){return h(r(e),n,t,o,i)}function u(t){return t&&t[p]||{}}function l(t,e,n,r,o,i){var s=this;this.tag=t,this.state=e,this.context={},this.prevent=!1,this.render=function(t,e){return e=h(t,e,s.tag(s.props,{set:function(n){s.state=n,e[c]||s.prevent||(s.prevent=!0,setTimeout(function(){s.render(t,e),s.prevent=!1},a.delay))},get:function(){return s.state}},s.context),s.context,n,r+1,o+1,i)}}function h(e,a,c,v,m,y,w,x){void 0===v&&(v={}),void 0===y&&(y=0),void 0===w&&(w=0),void 0===x&&(x={}),c=n(c)?c:new t("",{},[c||""]);var _=a,b=u(_),j=b.prev;void 0===j&&(j=new t);var A=b.components;void 0===A&&(A=x);var C,O,N=c.props.context;if(v=N?Object.assign({},v,N):v,m="svg"===c.tag||m,j===c||j.tag&&c.tag&&c.props.static)return _;A[w]&&A[w].tag!==c.tag&&delete A[w],"function"==typeof c.tag&&((A[w]||{}).tag!==c.tag&&(A[w]=new l(c.tag,c.props.state,m,y,w,A)),C=A[w],c=c.clone(j.tag||(m?"g":"")));var S=c.props.children;if(c.tag!==j.tag){if(_=function(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):t?document.createElement(t):document.createTextNode("")}(c.tag,m),a){if(!C&&""!==c.tag)for(var E=S.length;a.firstChild&&E--;)i(_,a.firstChild);!function(t,e,n,r){t.replaceChild(e,n)}(e,_,a),C||g(a)}else i(e,_);O=!0,c.emit("create",_)}if(C)return C.props=c.props,C.context=v,y&&C.prevent?_:C.render(e,_);if(c.tag){if(O||!1!==c.emit("update",_,j.props,c.props)){!function(t,e,n,r){for(var o=Object.keys(e),i=Object.keys(n).filter(function(t){return-1===o.indexOf(t)}),a=o.concat(i),p=function(o){var i=a[o];if(!(d.indexOf(i)>-1||e[i]===n[i])){s===i&&s in t&&t.attachShadow({mode:n[i]?"open":"closed"});var p="function"==typeof e[i],c="function"==typeof n[i];if(p||c)!c&&p&&t.removeEventListener(i,t[f][i][0]),c&&(p||(t[f]=t[f]||{},t[f][i]||(t[f][i]=[function(e){t[f][i][1](e)}]),t.addEventListener(i,t[f][i][0])),t[f][i][1]=n[i]);else if(i in n)if(i in t&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var v=e[i]||{},u=n[i];for(var l in u)v[l]!==u[l]&&("-"===l[0]?t.setProperty(l,u[l]):t.style[l]=u[l])}else t.style.cssText=n[i];else t[i]=n[i];else r?t.setAttributeNS(null,i,n[i]):t.setAttribute(i,n[i]);else t.removeAttribute(i)}},c=0;c<a.length;c++)p(c)}(_,c.tag===j.tag?j.props:{},c.props,m),y++;for(var T=c.props[s]?r(_):_,k=Array.from(T.childNodes),L=Math.max(k.length,S.length),M=0;M<L;M++)S[M]?h(T,k[M],S[M],v,m,y):k[M]&&(g(k[M]),o(T,k[M]))}}else j.props.children[0]!==c.props.children[0]&&(_.textContent=String(c.props.children[0]));return _[p]={prev:c,components:A},c.emit(O?"created":"updated",_),_}function g(e){var n=u(e).prev;void 0===n&&(n=new t);var r=e.childNodes;e[c]=!0,n.emit("remove",e);for(var o=0;o<r.length;o++)g(r[o]);n.emit("removed",e)}export{v as render,e as h,n as isVDom,a as options,p as MASTER,f as LISTENER,c as REMOVE,d as IGNORE};
//# sourceMappingURL=orby.m.js.map
