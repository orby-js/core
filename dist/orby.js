var t=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=[]),this.tag=t,this.props=Object.assign({},e,{children:r})};function e(e){return"object"==typeof e&&e instanceof t}function r(t){return t.shadowRoot||t}function n(t,e){t.removeChild(e)}function o(t,e){t.appendChild(e)}t.prototype.clone=function(e,r,n){return void 0===e&&(e=this.tag),void 0===r&&(r=this.props),void 0===n&&(n=this.props.children),new t(e,r,n)},t.prototype.emit=function(t){for(var e,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];this.prevent||("remove"===t&&(this.prevent=!0),"function"==typeof this.props[t]&&(e=this.props)[t].apply(e,r))};var i="attachShadow",s={delay:1},p="__master__",a="__remove__",c="__listeners__",f=["children","create","created","remove","removed","update","updated","context","state"];function d(t){return t&&t[p]||{}}function v(t,e,r,n,o,i){var p=this;this.tag=t,this.state=e,this.context={},this.prevent=!1,this.render=function(t,e){return e=u(t,e,p.tag(p.props,{set:function(r){p.state=r,e[a]||p.prevent||(p.prevent=!0,setTimeout(function(){p.render(t,e),p.prevent=!1},s.delay))},get:function(){return p.state}},p.context),p.context,r,n+1,o+1,i)}}function u(s,a,h,g,m,y,x,w){void 0===g&&(g={}),void 0===y&&(y=0),void 0===x&&(x=0),void 0===w&&(w={}),h=e(h)?h:new t("",{},[h||""]);var _=a,E=d(_),b=E.prev;void 0===b&&(b=new t);var O=E.components;void 0===O&&(O=w);var A,N,S=h.props.context;if(g=S?Object.assign({},g,S):g,m="svg"===h.tag||m,b===h)return _;O[x]&&O[x].tag!==h.tag&&delete O[x],"function"==typeof h.tag&&((O[x]||{}).tag!==h.tag&&(O[x]=new v(h.tag,h.props.state,m,y,x,O)),A=O[x],h=h.clone(b.tag||(m?"g":"")));var j=h.props.children;if(h.tag!==b.tag){if(_=function(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):t?document.createElement(t):document.createTextNode("")}(h.tag,m),a){if(!A&&""!==h.tag)for(var C=j.length;a.firstChild&&C--;)o(_,a.firstChild);!function(t,e,r){t.replaceChild(e,r)}(s,_,a),!A&&b.tag&&l(a)}else o(s,_);N=!0,h.emit("create",_)}if(A)return A.props=h.props,A.context=g,y&&A.prevent?_:A.render(s,_);if(h.tag){if(N||!1!==h.emit("update",_,b.props,h.props)){!function(t,e,r,n){for(var o=Object.keys(e),s=Object.keys(r).filter(function(t){return-1===o.indexOf(t)}),p=o.concat(s),a=function(o){var s=p[o];if(!(f.indexOf(s)>-1||e[s]===r[s])){i===s&&i in t&&t.attachShadow({mode:r[s]?"open":"closed"});var a="function"==typeof e[s],d="function"==typeof r[s];if(a||d)!d&&a&&t.removeEventListener(s,t[c][s][0]),d&&(a||(t[c]=t[c]||{},t[c][s]||(t[c][s]=[function(e){t[c][s][1](e)}]),t.addEventListener(s,t[c][s][0])),t[c][s][1]=r[s]);else if(s in r)if(s in t&&!n||n&&"style"===s)if("style"===s)if("object"==typeof r[s]){var v=e[s]||{},u=r[s];for(var l in u)v[l]!==u[l]&&("-"===l[0]?t.setProperty(l,u[l]):t.style[l]=u[l])}else t.style.cssText=r[s];else t[s]=r[s];else n?t.setAttributeNS(null,s,r[s]):t.setAttribute(s,r[s]);else t.removeAttribute(s)}},d=0;d<p.length;d++)a(d)}(_,h.tag===b.tag?b.props:{},h.props,m),y++;for(var R=h.props[i]?r(_):_,T=Array.from(R.childNodes),L=Math.max(T.length,j.length),M=0;M<L;M++)j[M]?u(R,T[M],j[M],g,m,y):T[M]&&(l(T[M]),n(R,T[M]))}}else b.props.children[0]!==h.props.children[0]&&(_.textContent=String(h.props.children[0]));return _[p]={prev:h,components:O},h.emit(N?"created":"updated",_),_}function l(e){var r=d(e).prev;void 0===r&&(r=new t);var n=e.childNodes;e[a]=!0,r.emit("remove",e);for(var o=0;o<n.length;o++)l(n[o]);r.emit("removed",e)}exports.render=function(t,e,n,o,i){return u(r(e),n,t,o,i)},exports.h=function(r,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(r||"",n,function r(n,o){void 0===o&&(o=[]);for(var i=0;i<n.length;i++){var s=n[i];Array.isArray(s)?r(s,o):o.push(e(s)?s:new t("",{},[s||""]))}return o}(o))},exports.isVDom=e,exports.options=s,exports.MASTER=p,exports.LISTENER=c,exports.REMOVE=a,exports.IGNORE=f;
//# sourceMappingURL=orby.js.map
