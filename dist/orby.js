var t=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=[]),this.tag=t,this.props=Object.assign({},e,{children:r})};function e(e){return"object"==typeof e&&e instanceof t}function r(t){return t.shadowRoot||t}function n(t,e){r(t).removeChild(e)}function o(t,e){r(t).appendChild(e)}t.prototype.clone=function(e,r,n){return void 0===e&&(e=this.tag),void 0===r&&(r=this.props),void 0===n&&(n=this.props.children),new t(e,r,n)},t.prototype.emit=function(t){for(var e,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];this.prevent||("remove"===t&&(this.prevent=!0),"function"==typeof this.props[t]&&(e=this.props)[t].apply(e,r))};var i="__master__",s="__remove__",a="__listeners__",p=["children","create","created","remove","removed","update","updated","context","state","static"];function c(t){return t&&t[i]||{}}function f(t,e,r,n,o,i){var a=this;this.tag=t,this.state=e,this.context={},this.prevent=!1,this.render=function(t,e){return e=v(t,e,a.tag(a.props,{set:function(r){a.state=r,e[s]||a.prevent||(a.prevent=!0,requestAnimationFrame(function(){a.render(t,e),a.prevent=!1}))},get:function(){return a.state}},a.context),a.context,r,n+1,o+1,i)}}function v(s,d,l,h,g,m,y,x){void 0===h&&(h={}),void 0===m&&(m=0),void 0===y&&(y=0),void 0===x&&(x={}),l=e(l)?l:new t("",{},[l||""]);var w=d,_=c(w),b=_.prev;void 0===b&&(b=new t);var A=_.components;void 0===A&&(A=x);var j,C,O=l.props.context;if(h=O?Object.assign({},h,O):h,g="svg"===l.tag||g,b===l||b.tag&&l.tag&&l.props.static)return w;A[y]&&A[y].tag!==l.tag&&delete A[y],"function"==typeof l.tag&&((A[y]||{}).tag!==l.tag&&(A[y]=new f(l.tag,l.props.state,g,m,y,A)),j=A[y],l=l.clone(b.tag||(g?"g":"")));var N=l.props.children;if(l.tag!==b.tag){if(w=function(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):t?document.createElement(t):document.createTextNode("")}(l.tag,g),d){if(!j&&""!==l.tag)for(var E=N.length;d.firstChild&&E--;)o(w,d.firstChild);!function(t,e,n){r(t).replaceChild(e,n)}(s,w,d),j||u(d)}else o(s,w);C=!0,l.emit("create",w)}if(j)return j.props=l.props,j.context=h,m&&j.prevent?w:j.render(s,w);if(l.tag){if(C||!1!==l.emit("update",w,b.props,l.props)){!function(t,e,r,n){for(var o=Object.keys(e),i=Object.keys(r).filter(function(t){return-1===o.indexOf(t)}),s=o.concat(i),c=function(o){var i=s[o];if(!(p.indexOf(i)>-1||e[i]===r[i])){var c="function"==typeof e[i],f="function"==typeof r[i];if(c||f)!f&&c&&t.removeEventListener(i,t[a][i][0]),f&&(c||(t[a]=t[a]||{},t[a][i]||(t[a][i]=[function(e){t[a][i][1](e)}]),t.addEventListener(i,t[a][i][0])),t[a][i][1]=r[i]);else if(i in r)if(i in t&&!n||n&&"style"===i)if("style"===i)if("object"==typeof r[i]){var v=e[i]||{},u=r[i];for(var d in u)v[d]!==u[d]&&("-"===d[0]?t.setProperty(d,u[d]):t.style[d]=u[d])}else t.style.cssText=r[i];else t[i]=r[i];else n?t.setAttributeNS(null,i,r[i]):t.setAttribute(i,r[i]);else t.removeAttribute(i)}},f=0;f<s.length;f++)c(f)}(w,l.tag===b.tag?b.props:{},l.props,g),m++;for(var S=Array.from(r(w).childNodes),k=Math.max(S.length,N.length),L=0;L<k;L++)N[L]?v(w,S[L],N[L],h,g,m):S[L]&&(u(S[L]),n(w,S[L]))}}else b.props.children[0]!==l.props.children[0]&&(w.textContent=String(l.props.children[0]));return w[i]={prev:l,components:A},l.emit(C?"created":"updated",w),w}function u(e){var r=c(e).prev;void 0===r&&(r=new t);var n=e.childNodes;e[s]=!0,r.emit("remove",e);for(var o=0;o<n.length;o++)u(n[o]);r.emit("removed",e)}exports.render=function(t,e,r,n,o){return v(e,r,t,n,o)},exports.h=function(r,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(r||"",n,function r(n,o){void 0===o&&(o=[]);for(var i=0;i<n.length;i++){var s=n[i];Array.isArray(s)?r(s,o):o.push(e(s)?s:new t("",{},[s||""]))}return o}(o))},exports.isVDom=e;
//# sourceMappingURL=orby.js.map
