!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t,n,r=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n}),this.key=this.props.key};function o(e){return e.shadowRoot||e}function s(e,t){e.removeChild(t)}function i(e,t){e.appendChild(t)}r.prototype.clone=function(e,t,n){return void 0===e&&(e=this.tag),void 0===t&&(t=this.props),void 0===n&&(n=this.props.children),new r(e,t,n)};var a={delay:1},f="__components__",c="__previous__",p="__remove__",d="__listeners__",u=/^(context|state|children|(create|update|remove)(d){0,1}|xmlns|key)$/;function v(e,t){for(var n,r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];e.removed||e.remove&&"removed"!==t||("remove"===t&&(e.remove=!0),"removed"===t&&(e.removed=!0),e.props[t]&&(n=e.props)[t].apply(n,r))}var l=function(e,r,o,s){var i=this;this.tag=e,this.props={},this.states=[],this.effects=[],this.context={},this.prevent=!1,this.render=function(a){if(!i.base[p]){n=0,t=i,i.effects=[[],[]];var f=e(i.props,i.context);return t=!1,i.base=h(i.parent,i.base,f,i.context,r,a,o+1,s),i.effects[1]=i.effects[0].map(function(e){return e()}),i.base}}};function h(e,t,n,a,p,m,b,_){void 0===a&&(a={}),void 0===b&&(b=0),void 0===_&&(_=[]);var x,w,k=t&&t[c]||new r,j=t&&t[f]||_,C=t,A=!0;if(k===n)return C;n instanceof r||(n=new r("",{},n));var E=n.props.children,N=n.props.context;if(a=N?Object.assign({},a,N):a,p="svg"===n.tag||p,j[b]&&j[b].tag!==n.tag&&y(j.splice(b)),"function"==typeof n.tag&&((j[b]||{}).tag!==n.tag&&(j[b]=new l(n.tag,p,b,j)),w=j[b],n=n.clone(k.tag||"")),k.tag!==n.tag){if(C=function(e,t){return e?t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):document.createTextNode("")}(n.tag,p),t){if(!w&&n.tag)for(var S=E.length;t.firstChild&&S--;)i(C,t.firstChild);!w&&k.tag&&g(t),function(e,t,n){e.replaceChild(t,n)}(e,C,t)}else i(e,C);x=!0,w||v(n,"create",C)}if(w)return w.base=C,w.parent=e,w.props=n.props,w.context=a,w.prevent?w.base:w.render(m);if(n.tag){if(A=!1!==v(n,"update",C,k.props,n.props),x||A){!function(e,t,n,r){for(var o=Object.keys(t),s=Object.keys(n),i=o.concat(s),a={},f=function(o){var s=i[o];if(!a[s]&&t[s]!==n[s]&&!u.test(s))if(a[s]=!0,"scoped"===s&&"attachShadow"in e)e.attachShadow({mode:n[s]?"open":"closed"});else{var f="function"==typeof t[s],c="function"==typeof n[s];if(f||c)!c&&f&&e.removeEventListener(s,e[d][s][0]),c&&(f||(e[d]=e[d]||{},e[d][s]||(e[d][s]=[function(t){e[d][s][1](t)}]),e.addEventListener(s,e[d][s][0])),e[d][s][1]=n[s]);else if(s in n)if(s in e&&!r||r&&"style"===s)if("style"===s)if("object"==typeof n[s]){var p=t[s]||{},v=n[s];for(var l in v)p[l]!==v[l]&&("-"===l[0]?e.style.setProperty(l,v[l]):e.style[l]=v[l])}else e.style.cssText=n[s];else e[s]=n[s];else r?e.setAttributeNS(null,s,n[s]):e.setAttribute(s,n[s]);else e.removeAttribute(s)}},c=0;c<i.length;c++)f(c)}(C,k.tag===n.tag?k.props:{},n.props,p);for(var O=n.props.scoped?o(C):C,T=O.childNodes,L={},P=0;P<T.length;P++){var R=T[P],$=R[c];L[$&&void 0!==$.key?$.key:P]=R}for(var q=0;q<E.length;q++){var z=E[q],B=z instanceof r&&void 0!==z.key,D=B?z.key:q;h(O,L[D],z,a,p,B?z.key!==D:m),delete L[D]}for(var F in L){var G=L[F];g(G),s(O,G)}}}else k.props.children!==n.props.children&&(C.textContent=n.props.children);return C[c]=A?n:k,C[f]=j,v(n,x?"created":"updated",C),C}function g(e){var t=e[c],n=e[f],r=e.childNodes;if(t){e[p]=!0,v(t,"remove",e),y(n);for(var o=0;o<r.length;o++)g(r[o]);v(t,"removed",e)}}function y(e){for(var t=0;t<e.length;t++)for(var n=e[t].effects[1],r=0;r<n.length;r++)n[r]&&n[r]()}e.render=function(e,t,n,r,s){return h(o(t),n,e,r,s)},e.h=function(e,t){for(var n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];return new r(e||"",t,function e(t,n){void 0===n&&(n=[]);for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?e(o,n):n.push(o)}return n}(n))},e.options=a,e.useState=function(e){var r=n++,o=t;return r in o.states||o.states.push("function"==typeof e?e():e),[o.states[r],function(e){o.states[r]=e,o.prevent||(setTimeout(function(){o.render(),o.prevent=!1},a.delay),o.prevent=!0)},function(){return o.states[r]}]},e.useEffect=function(e){t.effects[0].push(e)}});
//# sourceMappingURL=orby.umd.js.map
