!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n})};function n(e){return"object"==typeof e&&e instanceof t}function r(e){return e.shadowRoot||e}function o(e,t,n){e.removeChild(t)}function i(e,t,n){e.appendChild(t)}t.prototype.clone=function(e,n,r){return void 0===e&&(e=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new t(e,n,r)},t.prototype.emit=function(e){for(var t,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===e&&(this.prevent=!0),"function"==typeof this.props[e]&&(t=this.props)[e].apply(t,n))};var s={delay:1},p="__master__",a="__remove__",c="__listeners__",f=["children","create","created","remove","removed","update","updated","context","state","static"];function d(e){return e&&e[p]||{}}function u(e,t,n,r,o,i){var p=this;this.tag=e,this.state=t,this.context={},this.prevent=!1,this.render=function(e,t){return t=v(e,t,p.tag(p.props,{set:function(n){p.state=n,t[a]||p.prevent||(p.prevent=!0,setTimeout(function(){p.render(e,t),p.prevent=!1},s.delay))},get:function(){return p.state}},p.context),p.context,n,r+1,o+1,i)}}function v(e,s,a,h,g,m,y,x){void 0===h&&(h={}),void 0===m&&(m=0),void 0===y&&(y=0),void 0===x&&(x={}),a=n(a)?a:new t("",{},[a||""]);var w=s,_=d(w),b=_.prev;void 0===b&&(b=new t);var E=_.components;void 0===E&&(E=x);var O,j,A=a.props.context;if(h=A?Object.assign({},h,A):h,g="svg"===a.tag||g,b===a||b.tag&&a.tag&&a.props.static)return w;E[y]&&E[y].tag!==a.tag&&delete E[y],"function"==typeof a.tag&&((E[y]||{}).tag!==a.tag&&(E[y]=new u(a.tag,a.props.state,g,m,y,E)),O=E[y],a=a.clone(b.tag||(g?"g":"")));var N=a.props.children;if(a.tag!==b.tag){if(w=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(a.tag,g),s){if(!O&&""!==a.tag)for(var C=N.length;s.firstChild&&C--;)i(w,s.firstChild);!function(e,t,n,r){e.replaceChild(t,n)}(e,w,s),O||l(s)}else i(e,w);j=!0,a.emit("create",w)}if(O)return O.props=a.props,O.context=h,m&&O.prevent?w:O.render(e,w);if(a.tag){if(j||!1!==a.emit("update",w,b.props,a.props)){!function(e,t,n,r){for(var o=Object.keys(t),i=Object.keys(n).filter(function(e){return-1===o.indexOf(e)}),s=o.concat(i),p=function(o){var i=s[o];if(!(f.indexOf(i)>-1||t[i]===n[i])){var p="function"==typeof t[i],a="function"==typeof n[i];if(p||a)!a&&p&&e.removeEventListener(i,e[c][i][0]),a&&(p||(e[c]=e[c]||{},e[c][i]||(e[c][i]=[function(t){e[c][i][1](t)}]),e.addEventListener(i,e[c][i][0])),e[c][i][1]=n[i]);else if(i in n)if(i in e&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var d=t[i]||{},u=n[i];for(var v in u)d[v]!==u[v]&&("-"===v[0]?e.setProperty(v,u[v]):e.style[v]=u[v])}else e.style.cssText=n[i];else e[i]=n[i];else r?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}},a=0;a<s.length;a++)p(a)}(w,a.tag===b.tag?b.props:{},a.props,g),m++;for(var R=Array.from(r(w).childNodes),S=Math.max(R.length,N.length),T=0;T<S;T++)N[T]?v(w,R[T],N[T],h,g,m):R[T]&&(l(R[T]),o(w,R[T]))}}else b.props.children[0]!==a.props.children[0]&&(w.textContent=String(a.props.children[0]));return w[p]={prev:a,components:E},a.emit(j?"created":"updated",w),w}function l(e){var n=d(e).prev;void 0===n&&(n=new t);var r=e.childNodes;e[a]=!0,n.emit("remove",e);for(var o=0;o<r.length;o++)l(r[o]);n.emit("removed",e)}e.render=function(e,t,n,o,i){return v(r(t),n,e,o,i)},e.h=function(e,r){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(e||"",r,function e(r,o){void 0===o&&(o=[]);for(var i=0;i<r.length;i++){var s=r[i];Array.isArray(s)?e(s,o):o.push(n(s)?s:new t("",{},[s||""]))}return o}(o))},e.isVDom=n,e.options=s,e.MASTER=p,e.LISTENER=c,e.REMOVE=a,e.IGNORE=f});
//# sourceMappingURL=orby.umd.js.map
