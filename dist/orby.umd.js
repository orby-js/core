!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["@orby/core"]={})}(this,function(t){var e=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]),this.tag=t,this.props=Object.assign({},e,{children:n})};function n(t){return"object"==typeof t&&t instanceof e}function r(t){return t.shadowRoot||t}function o(t,e,n){t.removeChild(e)}function i(t,e,n){t.appendChild(e)}e.prototype.clone=function(t,n,r){return void 0===t&&(t=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new e(t,n,r)},e.prototype.emit=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===t&&(this.prevent=!0),"function"==typeof this.props[t]&&(e=this.props)[t].apply(e,n))};var s="attachShadow",a={delay:1},p="__master__",c="__remove__",f="__listeners__",d=["children","create","created","remove","removed","update","updated","context","state","static"];function u(t){return t&&t[p]||{}}function v(t,e,n,r,o,i){var s=this;this.tag=t,this.state=e,this.context={},this.prevent=!1,this.render=function(t,e){return e=l(t,e,s.tag(s.props,{set:function(n){s.state=n,e[c]||s.prevent||(s.prevent=!0,setTimeout(function(){s.render(t,e),s.prevent=!1},a.delay))},get:function(){return s.state}},s.context),s.context,n,r+1,o+1,i)}}function l(t,a,c,g,m,y,x,w){void 0===g&&(g={}),void 0===y&&(y=0),void 0===x&&(x=0),void 0===w&&(w={}),c=n(c)?c:new e("",{},[c||""]);var _=a,b=u(_),E=b.prev;void 0===E&&(E=new e);var O=b.components;void 0===O&&(O=w);var j,A,N=c.props.context;if(g=N?Object.assign({},g,N):g,m="svg"===c.tag||m,E===c||E.tag&&c.tag&&c.props.static)return _;O[x]&&O[x].tag!==c.tag&&delete O[x],"function"==typeof c.tag&&((O[x]||{}).tag!==c.tag&&(O[x]=new v(c.tag,c.props.state,m,y,x,O)),j=O[x],c=c.clone(E.tag||(m?"g":"")));var S=c.props.children;if(c.tag!==E.tag){if(_=function(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):t?document.createElement(t):document.createTextNode("")}(c.tag,m),a){if(!j&&""!==c.tag)for(var C=S.length;a.firstChild&&C--;)i(_,a.firstChild);!function(t,e,n,r){t.replaceChild(e,n)}(t,_,a),j||h(a)}else i(t,_);A=!0,c.emit("create",_)}if(j)return j.props=c.props,j.context=g,y&&j.prevent?_:j.render(t,_);if(c.tag){if(A||!1!==c.emit("update",_,E.props,c.props)){!function(t,e,n,r){for(var o=Object.keys(e),i=Object.keys(n).filter(function(t){return-1===o.indexOf(t)}),a=o.concat(i),p=function(o){var i=a[o];if(!(d.indexOf(i)>-1||e[i]===n[i])){s===i&&s in t&&t.attachShadow({mode:n[i]?"open":"closed"});var p="function"==typeof e[i],c="function"==typeof n[i];if(p||c)!c&&p&&t.removeEventListener(i,t[f][i][0]),c&&(p||(t[f]=t[f]||{},t[f][i]||(t[f][i]=[function(e){t[f][i][1](e)}]),t.addEventListener(i,t[f][i][0])),t[f][i][1]=n[i]);else if(i in n)if(i in t&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var u=e[i]||{},v=n[i];for(var l in v)u[l]!==v[l]&&("-"===l[0]?t.setProperty(l,v[l]):t.style[l]=v[l])}else t.style.cssText=n[i];else t[i]=n[i];else r?t.setAttributeNS(null,i,n[i]):t.setAttribute(i,n[i]);else t.removeAttribute(i)}},c=0;c<a.length;c++)p(c)}(_,c.tag===E.tag?E.props:{},c.props,m),y++;for(var R=c.props[s]?r(_):_,T=Array.from(R.childNodes),L=Math.max(T.length,S.length),M=0;M<L;M++)S[M]?l(R,T[M],S[M],g,m,y):T[M]&&(h(T[M]),o(R,T[M]))}}else E.props.children[0]!==c.props.children[0]&&(_.textContent=String(c.props.children[0]));return _[p]={prev:c,components:O},c.emit(A?"created":"updated",_),_}function h(t){var n=u(t).prev;void 0===n&&(n=new e);var r=t.childNodes;t[c]=!0,n.emit("remove",t);for(var o=0;o<r.length;o++)h(r[o]);n.emit("removed",t)}t.render=function(t,e,n,o,i){return l(r(e),n,t,o,i)},t.h=function(t,r){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new e(t||"",r,function t(r,o){void 0===o&&(o=[]);for(var i=0;i<r.length;i++){var s=r[i];Array.isArray(s)?t(s,o):o.push(n(s)?s:new e("",{},[s||""]))}return o}(o))},t.isVDom=n,t.options=a,t.MASTER=p,t.LISTENER=f,t.REMOVE=c,t.IGNORE=d});
//# sourceMappingURL=orby.umd.js.map
