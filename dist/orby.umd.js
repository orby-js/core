!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n})};function n(e){return e.shadowRoot||e}function r(e,t){e.removeChild(t)}function o(e,t){e.appendChild(t)}t.prototype.clone=function(e,n,r){return void 0===e&&(e=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new t(e,n,r)},t.prototype.emit=function(e){for(var t,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===e&&(this.prevent=!0),"function"==typeof this.props[e]&&(t=this.props)[e].apply(t,n))};var i="attachShadow",s={delay:1},a="__components__",p="__previous__",c="__remove__",f="__listeners__",d=/^(context|state|children|(create|update|remove)(d){0,1}|)$/;function u(e,t,n,r,o,i){var a=this;this.tag=e,this.state=t,this.context={},this.prevent=!1,this.render=function(e,t){return t=v(e,t,a.tag(a.props,{set:function(n){a.state=n,t[c]||a.prevent||(a.prevent=!0,setTimeout(function(){a.render(e,t),a.prevent=!1},s.delay))},get:function(){return a.state}},a.context),a.context,n,r+1,o+1,i)}}function v(e,s,l,h,g,m,y,_){void 0===h&&(h={}),void 0===m&&(m=0),void 0===y&&(y=0),void 0===_&&(_={});var w,x,b=s&&s[p]||new t,j=s&&s[a]||_,A=s;if(b===l)return A;l instanceof t||(l=new t("",{},l));var C=l.props.children,E=l.props.context;if(h=E?Object.assign({},h,E):h,g="svg"===l.tag||g,j[y]&&j[y].tag!==l.tag&&delete j[y],"function"==typeof l.tag&&((j[y]||{}).tag!==l.tag&&(j[y]=new u(l.tag,l.props.state,g,m,y,j)),x=j[y],l=l.clone(b.tag||(g?"g":""))),b.tag!==l.tag){if(A=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(l.tag,g),s){if(!x&&l.tag)for(var N=C.length;s.firstChild&&N--;)o(A,s.firstChild);!function(e,t,n){e.replaceChild(t,n)}(e,A,s),!x&&b.tag&&function e(n){var r=n&&n[MASTER]||{};var o=r.prev;void 0===o&&(o=new t);var i=n.childNodes;n[c]=!0;o.emit("remove",n);for(var s=0;s<i.length;s++)e(i[s]);o.emit("removed",n)}(s)}else o(e,A);w=!0,l.emit("create",A)}if(x)return x.props=l.props,x.context=h,m&&x.prevent?A:x.render(e,A);if(l.tag){if(w||!1!==l.emit("update",A,b.props,l.props)){!function(e,t,n,r){for(var o=Object.keys(t),s=Object.keys(n),a=o.concat(s),p={},c=function(o){var s=a[o];if(!p[s]&&t[s]!==n[s]&&!d.test(s)){p[s]=!0,i===s&&i in e&&e.attachShadow({mode:n[s]?"open":"closed"});var c="function"==typeof t[s],u="function"==typeof n[s];if(c||u)!u&&c&&e.removeEventListener(s,e[f][s][0]),u&&(c||(e[f]=e[f]||{},e[f][s]||(e[f][s]=[function(t){e[f][s][1](t)}]),e.addEventListener(s,e[f][s][0])),e[f][s][1]=n[s]);else if(s in n)if(s in e&&!r||r&&"style"===s)if("style"===s)if("object"==typeof n[s]){var v=t[s]||{},l=n[s];for(var h in l)v[h]!==l[h]&&("-"===h[0]?e.style.setProperty(h,l[h]):e.style[h]=l[h])}else e.style.cssText=n[s];else e[s]=n[s];else r?e.setAttributeNS(null,s,n[s]):e.setAttribute(s,n[s]);else e.removeAttribute(s)}},u=0;u<a.length;u++)c(u)}(A,b.tag===l.tag?b.props:{},l.props,g);for(var S=l.props[i]?n(A):A,O=S.childNodes,T=0,k=Math.max(C.length,O.length),L=0;L<k;L++){var M=L-T;L in C?v(S,O[M],C[L],g):(r(S,O[M]),T++)}}}else b.props.children!==l.props.children&&(A.textContent=l.props.children);return A[p]=l,A[a]=j,l.emit(w?"created":"updated",A),A}e.render=function(e,t,r,o,i){return v(n(t),r,e,o,i)},e.h=function(e,n){for(var r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];return new t(e||"",n,function e(t,n){void 0===n&&(n=[]);for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?e(o,n):n.push(o)}return n}(r))},e.options=s});
//# sourceMappingURL=orby.umd.js.map
