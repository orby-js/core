!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n})};function n(e){return"object"==typeof e&&e instanceof t}function r(e){return e.shadowRoot||e}function o(e,t){r(e).removeChild(t)}function i(e,t){r(e).appendChild(t)}t.prototype.clone=function(e,n,r){return void 0===e&&(e=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new t(e,n,r)},t.prototype.emit=function(e){for(var t,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===e&&(this.prevent=!0),"function"==typeof this.props[e]&&(t=this.props)[e].apply(t,n))};var s="__master__",a="__remove__",p="__listeners__",c=["children","create","created","remove","removed","update","updated","context","state","static"];function f(e){return e&&e[s]||{}}function d(e,t,n,r,o,i){var s=this;this.tag=e,this.state=t,this.context={},this.prevent=!1,this.render=function(e,t){return t=u(e,t,s.tag(s.props,{set:function(n){s.state=n,t[a]||s.prevent||(s.prevent=!0,requestAnimationFrame(function(){s.render(e,t),s.prevent=!1}))},get:function(){return s.state}},s.context),s.context,n,r+1,o+1,i)}}function u(e,a,l,h,g,m,y,x){void 0===h&&(h={}),void 0===m&&(m=0),void 0===y&&(y=0),void 0===x&&(x={}),l=n(l)?l:new t("",{},[l||""]);var w=a,_=f(w),b=_.prev;void 0===b&&(b=new t);var j=_.components;void 0===j&&(j=x);var A,C,O=l.props.context;if(h=O?Object.assign({},h,O):h,g="svg"===l.tag||g,b===l||b.tag&&l.tag&&l.props.static)return w;j[y]&&j[y].tag!==l.tag&&delete j[y],"function"==typeof l.tag&&((j[y]||{}).tag!==l.tag&&(j[y]=new d(l.tag,l.props.state,g,m,y,j)),A=j[y],l=l.clone(b.tag||(g?"g":"")));var N=l.props.children;if(l.tag!==b.tag){if(w=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(l.tag,g),a){if(!A&&""!==l.tag)for(var E=N.length;a.firstChild&&E--;)i(w,a.firstChild);!function(e,t,n){r(e).replaceChild(t,n)}(e,w,a),A||v(a)}else i(e,w);C=!0,l.emit("create",w)}if(A)return A.props=l.props,A.context=h,m&&A.prevent?w:A.render(e,w);if(l.tag){if(C||!1!==l.emit("update",w,b.props,l.props)){!function(e,t,n,r){for(var o=Object.keys(t),i=Object.keys(n).filter(function(e){return-1===o.indexOf(e)}),s=o.concat(i),a=function(o){var i=s[o];if(!(c.indexOf(i)>-1||t[i]===n[i])){var a="function"==typeof t[i],f="function"==typeof n[i];if(a||f)!f&&a&&e.removeEventListener(i,e[p][i][0]),f&&(a||(e[p]=e[p]||{},e[p][i]||(e[p][i]=[function(t){e[p][i][1](t)}]),e.addEventListener(i,e[p][i][0])),e[p][i][1]=n[i]);else if(i in n)if(i in e&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var d=t[i]||{},u=n[i];for(var v in u)d[v]!==u[v]&&("-"===v[0]?e.setProperty(v,u[v]):e.style[v]=u[v])}else e.style.cssText=n[i];else e[i]=n[i];else r?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}},f=0;f<s.length;f++)a(f)}(w,l.tag===b.tag?b.props:{},l.props,g),m++;for(var S=Array.from(r(w).childNodes),k=Math.max(S.length,N.length),L=0;L<k;L++)N[L]?u(w,S[L],N[L],h,g,m):S[L]&&(v(S[L]),o(w,S[L]))}}else b.props.children[0]!==l.props.children[0]&&(w.textContent=String(l.props.children[0]));return w[s]={prev:l,components:j},l.emit(C?"created":"updated",w),w}function v(e){var n=f(e).prev;void 0===n&&(n=new t);var r=e.childNodes;e[a]=!0,n.emit("remove",e);for(var o=0;o<r.length;o++)v(r[o]);n.emit("removed",e)}e.render=function(e,t,n,r,o){return u(t,n,e,r,o)},e.h=function(e,r){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(e||"",r,function e(r,o){void 0===o&&(o=[]);for(var i=0;i<r.length;i++){var s=r[i];Array.isArray(s)?e(s,o):o.push(n(s)?s:new t("",{},[s||""]))}return o}(o))},e.isVDom=n});
//# sourceMappingURL=orby.umd.js.map
