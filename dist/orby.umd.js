!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t,n,r=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n}),this.key=this.props.key};function o(e){return e.shadowRoot||e}function i(e,t){e.removeChild(t)}function s(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n)}function f(e,t,n){var r=t.nextSibling;n.nextSibling&&a(e,t,n),(r?a:s)(e,n,r)}r.prototype.clone=function(e,t,n){return void 0===e&&(e=this.tag),void 0===t&&(t=this.props),void 0===n&&(n=this.props.children),new r(e,t,n)};var c={delay:1},p="__components__",d="__previous__",u="__remove__",v="__listeners__",l=/^(context|state|children|(create|update|remove)(d){0,1}|xmlns|key)$/;function h(e,t){for(var n,r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];e.removed||e.remove&&"removed"!==t||("remove"===t&&(e.remove=!0),"removed"===t&&(e.removed=!0),e.props[t]&&(n=e.props)[t].apply(n,r))}var g=function(e,r,o,i){var s=this;this.tag=e,this.props={},this.states=[],this.effects=[],this.context={},this.prevent=!1,this.render=function(a){if(!s.base[u]){n=0,t=s,s.effects=[[],[]];var f=e(s.props,s.context);return t=!1,s.base=y(s.parent,s.base,f,s.context,r,a,o+1,i),s.effects[1]=s.effects[0].map(function(e){return e()}),s.base}}};function y(e,t,n,a,c,u,x,_){void 0===a&&(a={}),void 0===x&&(x=0),void 0===_&&(_=[]);var w,k,S=t&&t[d]||new r,j=t&&t[p]||_,C=t,A=!0;if(S===n)return C;n instanceof r||(n=new r("",{},n));var E=n.props.children,N=n.props.context;if(a=N?Object.assign({},a,N):a,c="svg"===n.tag||c,j[x]&&j[x].tag!==n.tag&&b(j.splice(x)),"function"==typeof n.tag&&((j[x]||{}).tag!==n.tag&&(j[x]=new g(n.tag,c,x,j)),k=j[x],n=n.clone(S.tag||"")),S.tag!==n.tag||u){if(C=function(e,t){return e?t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):document.createTextNode("")}(n.tag,c),t){if(!k&&n.tag)for(var O=E.length;t.firstChild&&O--;)s(C,t.firstChild);!k&&S.tag&&m(t),function(e,t,n){e.replaceChild(t,n)}(e,C,t)}else s(e,C);w=!0,k||h(n,"create",C)}if(k)return k.base=C,k.parent=e,k.props=n.props,k.context=a,k.prevent?k.base:k.render(u);if(n.tag){if(A=!1!==h(n,"update",C,S.props,n.props),w||A){!function(e,t,n,r){for(var o=Object.keys(t),i=Object.keys(n),s=o.concat(i),a={},f=function(o){var i=s[o];if(!a[i]&&t[i]!==n[i]&&!l.test(i))if(a[i]=!0,"scoped"===i&&"attachShadow"in e)e.attachShadow({mode:n[i]?"open":"closed"});else{var f="function"==typeof t[i],c="function"==typeof n[i];if(f||c)!c&&f&&e.removeEventListener(i,e[v][i][0]),c&&(f||(e[v]=e[v]||{},e[v][i]||(e[v][i]=[function(t){e[v][i][1](t)}]),e.addEventListener(i,e[v][i][0])),e[v][i][1]=n[i]);else if(i in n)if(i in e&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var p=t[i]||{},d=n[i];for(var u in d)p[u]!==d[u]&&("-"===u[0]?e.style.setProperty(u,d[u]):e.style[u]=d[u])}else e.style.cssText=n[i];else e[i]=n[i];else r?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}},c=0;c<s.length;c++)f(c)}(C,S.tag===n.tag?S.props:{},n.props,c);for(var T=n.props.scoped?o(C):C,K=T.childNodes,L={},B=0;B<K.length;B++){var P=K[B],R=P[d],$=R&&void 0!==R.key;L[$?R.key:B]={node:P,index:B,useKey:$}}for(var q=0;q<E.length;q++){var z=E[q],D=z instanceof r&&void 0!==z.key,F=D?z.key:q,G=L[F]||{};G.useKey&&G.index!==q&&f(T,G.node,K[q]),y(T,G.node,z,a,c,D?z.key!==F:u),delete L[F]}for(var H in L){var I=L[H];m(I.node),i(T,I.node)}}}else S.props.children!==n.props.children&&(C.textContent=n.props.children);return C[d]=A?n:S,C[p]=j,h(n,w?"created":"updated",C),C}function m(e){var t=e[d],n=e[p],r=e.childNodes;if(t){e[u]=!0,h(t,"remove",e),b(n);for(var o=0;o<r.length;o++)m(r[o]);h(t,"removed",e)}}function b(e){for(var t=0;t<e.length;t++)for(var n=e[t].effects[1],r=0;r<n.length;r++)n[r]&&n[r]()}e.render=function(e,t,n,r,i){return y(o(t),n,e,r,i)},e.h=function(e,t){for(var n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];return new r(e||"",t,function e(t,n){void 0===n&&(n=[]);for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?e(o,n):n.push(o)}return n}(n))},e.options=c,e.useState=function(e){var r=n++,o=t;return r in o.states||o.states.push("function"==typeof e?e():e),[o.states[r],function(e){o.states[r]=e,o.prevent||(setTimeout(function(){o.render(),o.prevent=!1},c.delay),o.prevent=!0)},function(){return o.states[r]}]},e.useEffect=function(e){t.effects[0].push(e)}});
//# sourceMappingURL=orby.umd.js.map
