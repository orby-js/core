!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){var t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),this.tag=e,this.props=Object.assign({},t,{children:n})};function n(e){return"object"==typeof e&&e instanceof t}function r(e){return e.shadowRoot||e}function o(e,t){e.removeChild(t)}function i(e,t){e.appendChild(t)}t.prototype.clone=function(e,n,r){return void 0===e&&(e=this.tag),void 0===n&&(n=this.props),void 0===r&&(r=this.props.children),new t(e,n,r)},t.prototype.emit=function(e){for(var t,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];this.prevent||("remove"===e&&(this.prevent=!0),"function"==typeof this.props[e]&&(t=this.props)[e].apply(t,n))};var s="attachShadow",a={delay:1},p="__master__",c="__remove__",f="__listeners__",d=["children","create","created","remove","removed","update","updated","context","state"];function u(e){return e&&e[p]||{}}function v(e,t,n,r,o,i){var s=this;this.tag=e,this.state=t,this.context={},this.prevent=!1,this.render=function(e,t){return t=l(e,t,s.tag(s.props,{set:function(n){s.state=n,t[c]||s.prevent||(s.prevent=!0,setTimeout(function(){s.render(e,t),s.prevent=!1},a.delay))},get:function(){return s.state}},s.context),s.context,n,r+1,o+1,i)}}function l(e,a,c,g,m,y,x,w){void 0===g&&(g={}),void 0===y&&(y=0),void 0===x&&(x=0),void 0===w&&(w={}),c=n(c)?c:new t("",{},[c||""]);var _=a,b=u(_),E=b.prev;void 0===E&&(E=new t);var O=b.components;void 0===O&&(O=w);var j,A,N=c.props.context;if(g=N?Object.assign({},g,N):g,m="svg"===c.tag||m,E===c)return _;O[x]&&O[x].tag!==c.tag&&delete O[x],"function"==typeof c.tag&&((O[x]||{}).tag!==c.tag&&(O[x]=new v(c.tag,c.props.state,m,y,x,O)),j=O[x],c=c.clone(E.tag||(m?"g":"")));var S=c.props.children;if(c.tag!==E.tag){if(_=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(c.tag,m),a){if(!j&&""!==c.tag)for(var C=S.length;a.firstChild&&C--;)i(_,a.firstChild);!function(e,t,n){e.replaceChild(t,n)}(e,_,a),!j&&E.tag&&h(a)}else i(e,_);A=!0,c.emit("create",_)}if(j)return j.props=c.props,j.context=g,y&&j.prevent?_:j.render(e,_);if(c.tag){if(A||!1!==c.emit("update",_,E.props,c.props)){!function(e,t,n,r){for(var o=Object.keys(t),i=Object.keys(n).filter(function(e){return-1===o.indexOf(e)}),a=o.concat(i),p=function(o){var i=a[o];if(!(d.indexOf(i)>-1||t[i]===n[i])){s===i&&s in e&&e.attachShadow({mode:n[i]?"open":"closed"});var p="function"==typeof t[i],c="function"==typeof n[i];if(p||c)!c&&p&&e.removeEventListener(i,e[f][i][0]),c&&(p||(e[f]=e[f]||{},e[f][i]||(e[f][i]=[function(t){e[f][i][1](t)}]),e.addEventListener(i,e[f][i][0])),e[f][i][1]=n[i]);else if(i in n)if(i in e&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){var u=t[i]||{},v=n[i];for(var l in v)u[l]!==v[l]&&("-"===l[0]?e.setProperty(l,v[l]):e.style[l]=v[l])}else e.style.cssText=n[i];else e[i]=n[i];else r?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}},c=0;c<a.length;c++)p(c)}(_,c.tag===E.tag?E.props:{},c.props,m),y++;for(var R=c.props[s]?r(_):_,T=Array.from(R.childNodes),L=Math.max(T.length,S.length),M=0;M<L;M++)S[M]?l(R,T[M],S[M],g,m,y):T[M]&&(h(T[M]),o(R,T[M]))}}else E.props.children[0]!==c.props.children[0]&&(_.textContent=String(c.props.children[0]));return _[p]={prev:c,components:O},c.emit(A?"created":"updated",_),_}function h(e){var n=u(e).prev;void 0===n&&(n=new t);var r=e.childNodes;e[c]=!0,n.emit("remove",e);for(var o=0;o<r.length;o++)h(r[o]);n.emit("removed",e)}e.render=function(e,t,n,o,i){return l(r(t),n,e,o,i)},e.h=function(e,r){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return new t(e||"",r,function e(r,o){void 0===o&&(o=[]);for(var i=0;i<r.length;i++){var s=r[i];Array.isArray(s)?e(s,o):o.push(n(s)?s:new t("",{},[s||""]))}return o}(o))},e.isVDom=n,e.options=a,e.MASTER=p,e.LISTENER=f,e.REMOVE=c,e.IGNORE=d});
//# sourceMappingURL=orby.umd.js.map
